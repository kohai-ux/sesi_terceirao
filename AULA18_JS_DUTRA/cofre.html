<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cofre digital</title>
    <script>
        class Cofre{
            
            //propriedades privadas (encapsulamento)
           
            #segredo = "";
            #senha = "1234";
            #tentativas = 0;
            #bloqueado = false;
            #limiteCaracteres = 50;

            //método para guardar segredo (validação de tamanho)

            guardarSegredo(novoSegredo){
                if(this.#bloqueado){
                    console.log('Cofre bloqueado!');
                    return false
                }

                if(novoSegredo.length>this.#limiteCaracteres){
                    console.log(`Segredo muito longo! Máximo de: ${this.#limiteCaracteres}  caracteres`);
                    return false;
                }

                this.#segredo = novoSegredo;
                console.log('Segredo guardado com sucesso!');
                return true;
            }
            
            //Método para ler segredo (validar senha)

            lerSegredo(senhaDigitada){
                if(this.#bloqueado){
                    console.log('Cofre bloqueado!');
                    return '';
                }
                if (senhaDigitada===this.#senha){
                    this.#tentativas = 0; // reseta as tentativas
                    console.log('Segredo revelado!');
                    return this.#segredo;
                }else{
                    this.#tentativas++;
                    console.log(`Senha incorreta! Tentativas restantes: ${3-this.#tentativas}/3`)
                    if(this.#tentativas>=3){
                        this.#bloquear();
                    }
                   return ''
                }
            }

            //método para redefinir a senha (com validação)

            redefinirSenha(senhaAntiga,novaSenha){
                if(this.#bloqueado){
                    console.log()
                }
            }
        }

       

    </script>
</head>
<body>
    <h1>Abra o console para ver todos os testes</h1>
</body>
</html>
